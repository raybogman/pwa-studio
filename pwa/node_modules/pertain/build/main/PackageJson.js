"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const dot_prop_1 = __importDefault(require("dot-prop"));
const path_1 = __importDefault(require("path"));
/**
 * Lazy-loading proxy for package.json. A subset of properties are available,
 * and a static method
 * `PackageJson.lookup(package: PackageJson, dotPath: string)`
 * exists for looking up other arbitrary properties.
 *
 * This speeds up dependency gathering; it won't be necessary to read all
 * package files from disk.
 */
class PackageJson {
    constructor(modulePath) {
        this.modulePath = modulePath;
    }
    /**
     * Look up a custom dot-path on a package.json instance. Abstracting this
     * simple operation behind a static method helps us to keep this loading lazy.
     */
    static lookup(pkg, dotPath) {
        return dot_prop_1.default.get(pkg.getJson(), dotPath);
    }
    get dependencies() {
        return this.getJson().dependencies || {};
    }
    get devDependencies() {
        return this.getJson().devDependencies || {};
    }
    get name() {
        return this.getJson().name;
    }
    get peerDependencies() {
        return this.getJson().peerDependencies || {};
    }
    getJson() {
        if (!this.json) {
            this.json = require(path_1.default.join(this.modulePath, 'package.json'));
        }
        return this.json;
    }
}
exports.default = PackageJson;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGFja2FnZUpzb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvUGFja2FnZUpzb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSx3REFBK0I7QUFDL0IsZ0RBQXdCO0FBTXhCOzs7Ozs7OztHQVFHO0FBQ0gsTUFBcUIsV0FBVztJQXNCOUIsWUFBWSxVQUFrQjtRQUM1QixJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztJQUMvQixDQUFDO0lBdkJEOzs7T0FHRztJQUNJLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBZ0IsRUFBRSxPQUFlO1FBQ3BELE9BQU8sa0JBQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzdDLENBQUM7SUFDRCxJQUFXLFlBQVk7UUFDckIsT0FBTyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsWUFBWSxJQUFJLEVBQUUsQ0FBQztJQUMzQyxDQUFDO0lBQ0QsSUFBVyxlQUFlO1FBQ3hCLE9BQU8sSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLGVBQWUsSUFBSSxFQUFFLENBQUM7SUFDOUMsQ0FBQztJQUNELElBQVcsSUFBSTtRQUNiLE9BQU8sSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLElBQWMsQ0FBQztJQUN2QyxDQUFDO0lBQ0QsSUFBVyxnQkFBZ0I7UUFDekIsT0FBTyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsZ0JBQWdCLElBQUksRUFBRSxDQUFDO0lBQy9DLENBQUM7SUFNTyxPQUFPO1FBQ2IsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDZCxJQUFJLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQyxjQUFJLENBQUMsSUFBSSxDQUMzQixJQUFJLENBQUMsVUFBVSxFQUNmLGNBQWMsQ0FDZixDQUFpQixDQUFDO1NBQ3BCO1FBQ0QsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ25CLENBQUM7Q0FDRjtBQWxDRCw4QkFrQ0MifQ==